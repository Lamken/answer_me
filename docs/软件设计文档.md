## 软件设计文档

此文档介绍 answer_me(基于区块链的轻量化问答社区) 项目的架构设计及技术实现：

- [技术选型以及理由](#1技术选型以及理由)
- [架构设计](#2架构设计)
- [模块划分](#3模块划分)
- [设计模式](#4设计模式)


#### 1、技术选型以及理由
在truffle框架部署智能合约的基础上，使用ganache作为私链，同时使用react和boost提供UI

 - 为什么选择 c++ 语言
    1. 抽象程度更高的语言的原生库已自带基本加密算法实现，如java、go、python等。但 c++ 的原生库并没有支持
    2. 底层的 c 语言已经有了著名的 openssl 库实现。
    3. c++ 是在性能及便利性中做折衷。
 - 为什么选择 sha、md5 等加密算法
    - sha1等常用加密算法：作为比较经典的加密算法，逐个实现加密步骤中需要完成的计算，能够为其他加密算法的开发和实现提供更为普适性的支持。
    - 算法描述完善清晰，容易测试验证。


#### 2、架构设计

由于是库函数提供，主要考虑的是使用的便利性，而仅仅头文件引用无疑是最方便的。也方便快速使用。因此利用了大量 c++ 的新特性来保证头文件的引用正确。

* include：核心算法过程实现
* test：测试保证加密算法的正确性
* examples：使用样例，入门教程
* googletest：第三方测试工具


#### 3、模块划分

根据需要实现的四类加密算法(五种不同过程)，对库函数划分为5个模块：
 - [Base64](https://en.wikipedia.org/wiki/Base64)
 - [MD5](https://en.wikipedia.org/wiki/MD5)
 - [SHA-1](https://en.wikipedia.org/wiki/SHA-1)
 - [SHA-256](https://en.wikipedia.org/wiki/SHA-2)
 - [SHA-512](https://en.wikipedia.org/wiki/SHA-2)



最后，综合考虑使用的语言，我们可以完善得到详细的项目结构如下所示。后续的开发可以明确地进行分工，每个人负责不同的工作，然后针对各个算法里面的主要功能进行开发即可，如设计，编码，测试等。开发完算法函数之后，再进行集成测试。
```txt
.
├── CMakeLists.txt                              # 总集项目
├── Doxyfile                                    # 代码文档生成文件 : doxygen
├── README.md                                   # 项目自述
├── examples                                    # 加密算法库函数使用例子
│   ├── CMakeLists.txt
│   ├── base64.cpp
│   ├── md5.cpp
│   ├── sha1.cpp
│   ├── sha256.cpp
│   └── sha512.cpp
├── googletest                                  # 第三方测试工具 : googletest
│   ├── CMakeLists.txt
│   ├── LICENSE
│   ├── README.md
│   ├── include                                 # googletest 头文件
│   │   └── gtest
│   └── src
│       └── ...
├── include                                     # 核心算法库
│   └── util
│       ├── base64.hpp                          # Base64 编码解码算法实现
│       ├── crypto.hpp                          # 加密算法库版本信息
│       ├── internal                            # 加密算法库内部使用的函数
│       │   ├── base64_helper.hpp
│       │   ├── md5_helper.hpp
│       │   ├── noncopyable.hpp
│       │   └── sha_helper.hpp
│       ├── md5.hpp                             # MD5 加密算法实现
│       ├── sha1.hpp                            # SHA-1 加密算法实现
│       ├── sha256.hpp                          # SHA-256 加密算法实现
│       └── sha512.hpp                          # SHA-512 加密算法实现
├── src                                         # 安装库文件
│   └── CMakeLists.txt                          # 构建安装头文件
└── tests                                       # 加密算法准确性测试
    ├── CMakeLists.txt                          # 构建测试
    ├── base64Test.cpp                          # Base64 编码解码测试
    ├── md5Test.cpp                             # MD5 加密算法测试
    ├── sha1Test.cpp                            # SHA-1 加密算法测试
    ├── sha256Test.cpp                          # SHA-256 加密算法测试
    └── sha512Test.cpp                          # SHA-512 加密算法测试
```



